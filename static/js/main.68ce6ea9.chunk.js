(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{13:function(e,c,t){},14:function(e,c,t){"use strict";t.r(c);var r=t(0),i=t.n(r),a=t(7),o=t.n(a),n=t(1),s=t(2),u=t(4),l=t(3),p=t(5),h=(t(13),function(e,c){return e<8&&e>=0&&c<8&&c>=0}),v=function(e,c){var t=[],r=[],i=e.r,a=e.c;return[{r:1,c:0},{r:-1,c:0},{r:0,c:1},{r:0,c:-1}].forEach((function(o){for(var n=i+o.r,s=a+o.c;h(n,s);){if(c[n][s].piece){c[n][s].piece.white!==e.white&&r.push({r:n,c:s});break}t.push({r:n,c:s}),n+=o.r,s+=o.c}})),{possibleMoves:t,attack:r}},f=function(e,c){var t=e.r,r=e.c,i=[],a=[];return[{r:1,c:1},{r:1,c:-1},{r:-1,c:1},{r:-1,c:-1}].forEach((function(o){for(var n=t+o.r,s=r+o.c;h(n,s);){if(c[n][s].piece){c[n][s].piece.white!==e.white&&a.push({r:n,c:s});break}i.push({r:n,c:s}),n+=o.r,s+=o.c}})),{possibleMoves:i,attack:a}},k=function(e,c){var t=[],r=[],i=e.r,a=e.c;return e.white?(i+1<8&&!c[i+1][a].piece&&(t.push({r:i+1,c:a}),i+2<8&&e.firstMove&&!c[i+2][a].piece&&t.push({r:i+2,c:a})),i+1<8&&a+1<8&&c[i+1][a+1].piece&&!c[i+1][a+1].piece.white&&r.push({r:i+1,c:a+1}),i+1<8&&a-1>=0&&c[i+1][a-1].piece&&!c[i+1][a-1].piece.white&&r.push({r:i+1,c:a-1})):(i-1>=0&&!c[i-1][a].piece&&(t.push({r:i-1,c:a}),i-2>=0&&e.firstMove&&!c[i-2][a].piece&&t.push({r:i-2,c:a})),i-1>=0&&a+1<8&&c[i-1][a+1].piece&&c[i-1][a+1].piece.white&&r.push({r:i-1,c:a+1}),i-1>=0&&a-1>=0&&c[i-1][a-1].piece&&c[i-1][a-1].piece.white&&r.push({r:i-1,c:a-1})),{possibleMoves:t,attack:r}},m=function(e,c){switch(console.log(e.pieceName),e.pieceName){case"pawn":return k(e,c);case"knight":return function(e,c){var t=e.r,r=e.c,i=[],a=[];return[{r:2,c:1},{r:2,c:-1},{r:1,c:2},{r:1,c:-2},{r:-2,c:1},{r:-2,c:-1},{r:-1,c:2},{r:-1,c:-2}].forEach((function(o){var n,s;n=t+o.r,s=r+o.c,h(n,s)&&(c[n][s].piece?c[n][s].piece.white!==e.white&&a.push({r:n,c:s}):i.push({r:n,c:s}))})),{possibleMoves:i,attack:a}}(e,c);case"rook":return v(e,c);case"bishop":return f(e,c);case"queen":return function(e,c){var t=v(e,c),r=f(e,c),i=t.possibleMoves,a=t.attack;return r.possibleMoves.forEach((function(e){i.push(e)})),r.attack.forEach((function(e){a.push(e)})),{possibleMoves:i,attack:a}}(e,c);case"king":return function(e,c){var t=[],r=[],i=e.r,a=e.c;return[{r:1,c:0},{r:1,c:1},{r:1,c:-1},{r:-1,c:0},{r:-1,c:1},{r:-1,c:-1},{r:0,c:0},{r:0,c:1},{r:0,c:-1}].forEach((function(o){var n=i+o.r,s=a+o.c;h(n,s)&&(c[n][s].piece?e.white!==c[n][s].piece.white&&r.push({r:n,c:s}):t.push({r:n,c:s}))})),{possibleMoves:t,attack:r}}(e,c);default:return[]}},b=function(e){function c(e){var t;return Object(n.a)(this,c),(t=Object(u.a)(this,Object(l.a)(c).call(this,e))).state={white:{},black:{},Board:[],possibleMoves:[],attack:[],activePlayer:!1},t}return Object(p.a)(c,e),Object(s.a)(c,[{key:"initialiseGame",value:function(){for(var e={},c={},t=[],r=[],i=0;i<8;i++)t.push({r:1,c:i,firstMove:!0,move:"down"}),r.push({r:6,c:7-i,firstMove:!0,move:"up"});c.pawn=r,e.pawn=t,c.rook=[{r:7,c:0,firstMove:!0},{r:7,c:7,firstMove:!0}],e.rook=[{r:0,c:0,firstMove:!0},{r:0,c:7,firstMove:!0}],c.knight=[{r:7,c:1,firstMove:!0},{r:7,c:6,firstMove:!0}],e.knight=[{r:0,c:1,firstMove:!0},{r:0,c:6,firstMove:!0}],c.bishop=[{r:7,c:2,firstMove:!0},{r:7,c:5,firstMove:!0}],e.bishop=[{r:0,c:2,firstMove:!0},{r:0,c:5,firstMove:!0}],c.queen=[{r:7,c:3,firstMove:!0}],e.queen=[{r:0,c:3,firstMove:!0}],c.king=[{r:7,c:4,firstMove:!0}],e.king=[{r:0,c:4,firstMove:!0}];for(var a=!0,o=[],n=0;n<8;n++){for(var s=a,u=[],l=0;l<8;l++)u.push({r:n,c:l,color:s}),s=!s;a=!a,o.push(u)}this.setState({Board:o,white:e,black:c,possibleMoves:[],attack:[]})}},{key:"componentDidMount",value:function(){this.initialiseGame()}},{key:"gameover",value:function(e){e?alert("white won"):alert("black won"),this.initialiseGame()}},{key:"move",value:function(e,c){if(e.white===this.state.activePlayer){var t=m(e,c);this.setState({selected:e,possibleMoves:t.possibleMoves,attack:t.attack})}}},{key:"changePosition",value:function(e,c){var t=this.state,r=t.selected,i=t.activePlayer;r.r=e,r.c=c,r.firstMove=!1,this.setState({selected:r,possibleMoves:[],attack:[],activePlayer:!i})}},{key:"eliminate",value:function(e){var c=this.state,t=c.white,r=c.black,i=c.selected,a=c.activePlayer;if(e.piece.white){var o=e.piece,n=-1;t[o.pieceName].forEach((function(e,c){if(e){var t=e.r,r=e.c;t!==o.r||r!==o.c||(n=c)}})),i.r=o.r,i.c=o.c,delete t[o.pieceName][n],t[o.pieceName][n]=null}else{var s=e.piece,u=-1;r[s.pieceName].forEach((function(e,c){if(e){var t=e.r,r=e.c;t!==s.r||r!==s.c||(u=c)}})),i.r=s.r,i.c=s.c,delete r[s.pieceName][u],r[s.pieceName][u]=null}"king"===e.piece.pieceName?this.gameover(!e.piece.white):this.setState({white:t,black:r,selected:null,activePlayer:!a,possibleMoves:[],attack:[]})}},{key:"render",value:function(){var e=this,c=this.state,t=c.Board,r=c.white,a=c.black,o=c.possibleMoves,n=c.attack,s=[];t.forEach((function(e){var c=[];e.forEach((function(e){var t=e.r,r=e.c,i=e.color;c.push({r:t,c:r,color:i})})),s.push(c)}));var u=function(e){r[e].forEach((function(c){if(c){var t=c.r,r=c.c;c.pieceName=e,c.player="white",c.white=!0,s[t][r].piece=c}}))};for(var l in r)u(l);var p=function(e){a[e].forEach((function(c){if(c){var t=c.r,r=c.c;c.pieceName=e,c.player="black",c.white=!1,s[t][r].piece=c}}))};for(var h in a)p(h);o.forEach((function(e){var c=e.r,t=e.c;s[c][t].highlight=!0})),n.forEach((function(e){var c=e.r,t=e.c;s[c][t].attack=!0}));var v=s.map((function(c,t){var r=c.map((function(c,r){var a="black";c.color&&(a="white");var o=null,n=null;return c.piece&&c.piece.player&&c.piece.pieceName&&(o=i.a.createElement("img",{src:"/images/"+c.piece.player+"_"+c.piece.pieceName+".png",className:"piece"}),n=function(){return e.move(c.piece,s)}),c.highlight?i.a.createElement("div",{className:"block highlight",onClick:function(){e.changePosition(t,r)},key:8*t+r,style:{backgroundColor:a}}):c.attack?i.a.createElement("div",{className:"block attack",key:8*t+r,onClick:function(){e.eliminate(c)},style:{backgroundColor:a}},o):i.a.createElement("div",{className:"block",key:8*t+r,onClick:n,style:{backgroundColor:a}},o)}));return i.a.createElement("div",{key:t,className:"row"},r)}));return i.a.createElement("div",{style:{margin:"auto"}},v)}}]),c}(r.Component),M=function(e){function c(){return Object(n.a)(this,c),Object(u.a)(this,Object(l.a)(c).apply(this,arguments))}return Object(p.a)(c,e),Object(s.a)(c,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(b,null))}}]),c}(r.Component);o.a.render(i.a.createElement(M,null),document.getElementById("root"))},8:function(e,c,t){e.exports=t(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.68ce6ea9.chunk.js.map